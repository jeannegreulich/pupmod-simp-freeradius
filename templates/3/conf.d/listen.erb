listen {
  type = <%= @listen_type %>
<% if [ 'ALL', 'any' ].include? @ipaddr -%>
  ipaddr = *
<% elsif @ipaddr.include?(':') -%>
  ipv6addr = <%= @ipaddr %>
<% else -%>
  ipaddr = <%= @ipaddr %>
<% end -%>
  port = <%= @port %>
<% if @interface -%>
  interface = <%= @interface %>
<% end -%>
<% if @per_socket_clients -%>
  clients = <%= @per_socket_clients %>
<% end -%>
  limit {
<% if @max_pps -%>
    max_pps = <%= @max_pps %>
<% end -%>
<% if @lifetime -%>
    lifetime = <%= @lifetime %>
<% end -%>
<% if @idle_timeout -%>
    idle_timeout = <%= @idle_timeout %>
<% end -%>
<% if @max_connections -%>
    max_connections = <%= @max_connections %>
<% end -%>
  }
}
